<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body {
            background: #efefef;
            padding: 8px 48px;
        }

        #renderer {
            width: 800px;
            height: 600px;
            background: #fff;
            padding: 0;
        }
    </style>
    <script type="text/javascript" src="d3.v3.js"></script>
    <script type="text/javascript" src="d3.layout.cloud.js"></script>
</head>
<body>
<h1>Wordle with Link</h1>
<svg id="renderer"></svg>
</body>

<script>
    var root = d3.select('#renderer');

    var width = 800;
    var height = 600;

    var color = d3.scale.linear()
        .domain([0, 1, 2, 3, 4, 5, 6, 10, 15, 20, 100])
        .range(["#ddd", "#ccc", "#bbb", "#aaa", "#999", "#888", "#777", "#666", "#555", "#444", "#333", "#222"]);

    var wordleData = [];
    d3.csv("./data.csv", function (allData) {
        for (var i = 0; i < allData.length; i++) {
            var eachVideoData = allData[i];
            wordleData.push({ text: eachVideoData.title, size: Math.random() * 50, url: eachVideoData.url });
        }

        d3.layout.cloud().size([width / 2, height / 2])
            .words(wordleData)
            .rotate(0)
            .fontSize(function (d) {
                return d.size;
            })
            .on("end", draw)
            .start();

        function draw(words) {
            root.attr("class", "wordcloud")
                .append("g")
                .attr("transform", "translate(" + width / 3 + "," + height / 3 + ")")
                .selectAll("text")
                .data(words)
                .enter().append("text")
                .style("font-size", function (d) {
                    return d.size + "px";
                })
                .style("fill", function (d, i) {
                    return color(i);
                })
                .attr("transform", function (d) {
                    console.log(d);
                    return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
                })
                .text(function (d) {
                    return d.text;
                })
                .attr('text-anchor', 'start')
                .attr('alignment-baseline', 'hanging')
                .on("mouseover", function (d, i) {
                    document.body.style.cursor = "pointer";
                })
                .on("click", function (d, i) {
                    window.open(d.url);
                });
        }
    });

</script>
</html>